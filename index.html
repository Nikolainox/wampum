<!-- index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Spatial Peak</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top">
    <div class="brand">
      <div class="logo"></div>
      <div class="brandText">
        <div class="brandTitle">Spatial Peak</div>
        <div class="brandSub" id="todayLabel">—</div>
      </div>
    </div>
    <div class="topBtns">
      <button class="btn ghost" id="revealBtn">Reveal</button>
      <button class="btn primary" id="finalizeBtn">Finalize</button>
    </div>
  </header>

  <section class="hub">
    <div class="hubCard" id="hubCard" role="button" tabindex="0" aria-label="Scoreboard (double tap for Quick Telemetry)">
      <div class="hubTop">
        <div class="hubTitle">Live Hub</div>
        <div class="live"><span class="dot"></span>LIVE</div>
      </div>

      <div class="hubStats">
        <div class="stat"><div class="k">Readiness</div><div class="v" id="hubReadiness">--%</div></div>
        <div class="stat"><div class="k">Momentum</div><div class="v" id="hubMomentum">--</div></div>
        <div class="stat"><div class="k">Tomorrow</div><div class="v" id="hubTomorrow">--%</div></div>
        <div class="stat"><div class="k">Pot</div><div class="v" id="hubPot">0</div></div>
      </div>

      <div class="spatialGrid">
        <div class="spatialCard">
          <div class="stitle">Spatial Day Lines</div>
          <canvas id="linesCanvas" width="820" height="420"></canvas>
          <div class="legend">
            <span class="lg"><i class="sw focus"></i>Focus</span>
            <span class="lg"><i class="sw food"></i>Eating</span>
            <span class="lg"><i class="sw habit"></i>Habits</span>
            <span class="lg"><i class="sw train"></i>Workout</span>
            <span class="lg"><i class="sw sleep"></i>Sleep</span>
            <span class="lg"><i class="sw holo"></i>Hologram</span>
          </div>
        </div>

        <div class="spatialCard">
          <div class="stitle">Readiness: Actual vs Hologram</div>
          <canvas id="readinessCanvas" width="820" height="250"></canvas>
          <div class="tiny" id="microInsight">—</div>
        </div>
      </div>

      <div class="hubHint">Double tap cards = add/done · Long press = remove · Double tap hub = Quick Telemetry</div>
    </div>
  </section>

  <main class="views">
    <section class="view active" id="view-home">
      <div class="sectionHead">
        <div class="sectionTitle">Daily Hand</div>
        <div class="sectionMeta">
          <span class="pill" id="handMeta">0 cards</span>
          <span class="pill" id="lockMeta">Unlocked</span>
        </div>
      </div>

      <div class="homeGrid">
        <div class="panel">
          <div class="miniTitle">Board (Context)</div>
          <div class="chips">
            <div class="chip"><div class="ck">Sleep</div><div class="cv" id="bSleep">OK</div></div>
            <div class="chip"><div class="ck">Energy</div><div class="cv" id="bEnergy">5</div></div>
            <div class="chip"><div class="ck">Stress</div><div class="cv" id="bStress">5</div></div>
            <div class="chip"><div class="ck">Mood</div><div class="cv" id="bMood">5</div></div>
          </div>

          <div class="miniTitle">One Open in the Evening</div>
          <div class="reveal">
            <div class="rTop">
              <div class="rTitle">Evening Reveal</div>
              <div class="rSub">Open once, mark reality, finalize. No rewrites.</div>
            </div>
            <div class="rBtns">
              <button class="btn ghost" id="quickTelemetryBtn">Quick Telemetry</button>
              <button class="btn primary" id="goLibraryBtn">Pick Cards</button>
            </div>
          </div>

          <div class="miniTitle">AI Leverage</div>
          <div class="aiBox">
            <div class="aiRow">
              <div class="aiK">Leverage</div>
              <div class="aiV" id="aiLeverage">—</div>
            </div>
            <div class="aiRow">
              <div class="aiK">Remove</div>
              <div class="aiV" id="aiRemove">—</div>
            </div>
            <div class="aiRow">
              <div class="aiK">Prompt</div>
              <textarea id="aiPrompt" rows="4" placeholder="Write 3 lines about today. Then tap Generate."></textarea>
            </div>
            <div class="aiBtns">
              <button class="btn ghost" id="copyPromptBtn">Copy Prompt</button>
              <button class="btn primary" id="generateCoachBtn">Generate</button>
            </div>
            <div class="aiCoach" id="aiCoach">—</div>
          </div>
        </div>

        <div class="panel">
          <div class="miniTitle">Your Cards</div>
          <div class="railWrap"><div class="rail" id="handRail"></div></div>
          <div class="empty" id="handEmpty">Pick 3–5 cards. Keep it playable.</div>

          <div class="actions">
            <button class="btn ghost" id="autoHandBtn">Auto-hand</button>
            <button class="btn ghost" id="clearHandBtn">Clear</button>
          </div>
        </div>
      </div>
    </section>

    <section class="view" id="view-calendar">
      <div class="sectionHead">
        <div class="sectionTitle">Habit Calendar</div>
        <div class="sectionMeta">
          <button class="btn ghost" id="prevMonthBtn">Prev</button>
          <span class="pill" id="monthLabel">—</span>
          <button class="btn ghost" id="nextMonthBtn">Next</button>
        </div>
      </div>
      <div class="calWrap">
        <div class="calGrid" id="calGrid"></div>
      </div>
      <div class="inspect" id="inspect">
        <div class="iHead">
          <div class="iTitle" id="iTitle">Select a day</div>
          <div class="iMeta" id="iMeta">—</div>
        </div>
        <div class="iBody">
          <div class="iRailWrap"><div class="iRail" id="iRail"></div></div>
          <div class="iNotes" id="iNotes">—</div>
        </div>
      </div>
    </section>

    <section class="view" id="view-library">
      <div class="sectionHead">
        <div class="sectionTitle">Habit Library</div>
        <div class="sectionMeta">
          <input class="search" id="search" placeholder="Search…" />
          <span class="pill">Double tap to add</span>
        </div>
      </div>
      <div id="library"></div>
    </section>

    <section class="view" id="view-insights">
      <div class="sectionHead">
        <div class="sectionTitle">Insights</div>
        <div class="sectionMeta">
          <span class="pill">Bayes + Monte Carlo</span>
          <button class="btn ghost" id="exportBtn">Export JSON</button>
        </div>
      </div>
      <div class="insGrid">
        <div class="insCard">
          <div class="insTitle">What worked / didn’t</div>
          <div class="insBody" id="insWorked">—</div>
        </div>
        <div class="insCard">
          <div class="insTitle">Counterfactual</div>
          <div class="insBody" id="insCounter">—</div>
          <div class="tiny">Example built from your data: “Without morning meditation, focus line dips later.”</div>
        </div>
        <div class="insCard">
          <div class="insTitle">Tomorrow (suggested hand)</div>
          <div class="insBody" id="insTomorrow">—</div>
        </div>
      </div>
    </section>

    <section class="view" id="view-telemetry">
      <div class="panel">
        <div class="sectionTitle">Telemetry</div>
        <div class="tGrid">
          <div class="tField"><label>Energy</label><input type="range" min="1" max="10" value="5" data-field="energy"><div class="tVal" id="energyLabel">5/10</div></div>
          <div class="tField"><label>Stress</label><input type="range" min="1" max="10" value="5" data-field="stress"><div class="tVal" id="stressLabel">5/10</div></div>
          <div class="tField"><label>Mood</label><input type="range" min="1" max="10" value="5" data-field="mood"><div class="tVal" id="moodLabel">5/10</div></div>
          <div class="tField"><label>Motivation</label><input type="range" min="1" max="10" value="5" data-field="motivation"><div class="tVal" id="motivationLabel">5/10</div></div>
          <div class="tField"><label>Difficulty</label><input type="range" min="1" max="10" value="5" data-field="difficulty"><div class="tVal" id="difficultyLabel">5/10</div></div>
          <div class="tField"><label>Sleep</label>
            <select data-field="sleep">
              <option value="good">Good</option>
              <option value="ok" selected>OK</option>
              <option value="bad">Bad</option>
            </select>
            <div class="tVal" id="sleepLabel">OK</div>
          </div>
        </div>
        <div class="tNotes">
          <label>Notes</label>
          <textarea id="notes" rows="4" placeholder="Short note…"></textarea>
        </div>
      </div>
    </section>
  </main>

  <nav class="bottom">
    <button class="tab active" data-view="home">Home</button>
    <button class="tab" data-view="calendar">Calendar</button>
    <button class="tab" data-view="library">Library</button>
    <button class="tab" data-view="insights">Insights</button>
    <button class="tab" data-view="telemetry">Telemetry</button>
  </nav>

  <div class="qt hidden" id="qt" role="dialog" aria-modal="true">
    <div class="qtBack" id="qtBack"></div>
    <div class="qtSheet" id="qtSheet">
      <div class="qtGrab"></div>
      <div class="qtTitle">Quick Telemetry</div>

      <div class="qtRow">
        <div class="qtK">Energy</div>
        <input id="qtEnergy" type="range" min="1" max="10" value="5" />
        <div class="qtV" id="qtEnergyV">5</div>
      </div>

      <div class="qtRow">
        <div class="qtK">Stress</div>
        <input id="qtStress" type="range" min="1" max="10" value="5" />
        <div class="qtV" id="qtStressV">5</div>
      </div>

      <div class="qtRow">
        <div class="qtK">Mood</div>
        <input id="qtMood" type="range" min="1" max="10" value="5" />
        <div class="qtV" id="qtMoodV">5</div>
      </div>

      <div class="qtBtns">
        <button class="btn ghost" id="qtClose">Close</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="app.js"></script>
</body>
</html>
